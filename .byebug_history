c
NotaFiscalItemLote.all
c
NotaFiscalItemLote.all
exit
nota_fiscal_itens.find_by(produto_id: movimento["produto_id"])
n
c
NotaFiscalItemLote.all
c
x
c
NotaFiscalItemLote.all
c
n
c
cc
movimento["produto_id"]
movimento["produto)id"]
nota_fiscal_itens.select("produto_id")
nota_fiscal_itens.find_by(produto_id: movimento["produto_id"])
nota_fiscal_itens
nota_fiscal_itens.find_by(produto_id: movimento["produto_id"])
nota_fiscal_itens.find_by(nota_fiscal_id: self.id, produto_id: movimento["produto_id"])
n
c
@nota_fiscal_faturamento_parcela
n
faturamento_parcela[:valor_parcela]
n
exit
c
nota_fiscal.valor_total_nota
c
@nota_fiscal.calculo_valor_total_nota
@nota_fiscal.nota_fiscal_itens.sum(:preco_total)
c
n
c
e
n
nn
n
c
e
n
c
e
n
c
@nota_fiscal.cliente.consumidor_final
c
self.nota_fiscal.cfop.cliente_fornecedor_cf
self.nota_fiscal.cfop
c
@nota_fiscal_item.calculo_imposto_item(@adm)
redirect_to new_nota_fiscal_nota_fiscal_item_path(@n
n
c
C
Time.zone.now.strftime('%Y-%m-%dT%H:%M:%S')
Time.zone.now.strftime('%Y-%m-%d')
nota_fiscal_params
c
 @movimento_estoques
n
params[:data_inicio].present? && params[:data_fim].present? 
exit
c
params[:produto_id]
produto.id
c
estoque_params[:estoque_atual_lote].to_f
estoque_params
@estoque.produto.estoque_atual
@estoque.estoque_atual_lote
n
c
n
c
n
@estoque = Estoque.find(params[:estoque][:id])
params[:estoque][:id]
params[:id]
c
n
c
exit
@estoque
c
n
c
exit
 params.require(:estoque).permit(:produto_id, :fornecedor_id, :lote, :documento, :ultima_alteracao)
 params.require('/estoques/baixa').permit(:produto_id, :fornecedor_id, :lote, :documento, :ultima_alteracao,
params
c
n
nota_fiscal_imposto
n
c
self.valor_produtos
n
c
self
n
c
preco_total
@nota_fiscal.nota_fiscal_itens.sum(:preco_total)
@nota_fiscal.nota_fiscal_itens
c
@nota_fiscal_item.calculo_imposto_item
@nota_fiscal_item.verifica_cst@nota_fiscal_item.calculo_imposto_item
n
@nota_fiscal_item.verifica_cst
n
c
situacao_tributaria
n
c
n
params[:movimentos]
n
c
@produtos.count
c
@produtos.count
c
@produtos.count
@produtos.all
exit
movimento
movimento["estoque_final"]
movimento["estoque_inicial"]
movimento["qtd"]
movimento["data"].to_date
movimento["origem"]
movimento["estoque_id"]
movimento["produto_id"]
nmovimento["produto_id"]
n
c
movimentos
c
movimentos
moviemntos
movimento
c
movimento
c
movimento
c
mv["produto_id"]
mv["data"].to_datetime
mv["data"].to_date
mv["data"]
mv["produto_id"]
mv = JSON.parse(movimento)
JSON.parse(movimento)
c
exit
movimentos
c
a.first
a
a[0].split("}")[0] << "}"
a[0].split("}")[0]
a[0].split("}")
a[0]
a
n
c
JSON.parse(a[0])
a = params[:movimentos].split("[").join("").split("]")
b = JSON.parse(a[0])
a = params[:movimentos].split("[").join("").split("]")
b = JSON.parse(a[0])
JSON.parse(a[0])
a = params[:movimentos].split("[").join("").split("]")
params[:movimentos].split("[").join("").split("]")
params[:movimentos].split("[").join("]")
params[:movimentos]
exit
params[:movimentos]
c
Array.new(params[:movimentos])
params[:movimentos].split("[")
params[:movimentos].split("[]")
params[:movimentos].split()
params[:movimentos].split("")
params[:movimentos].split("[")
params[:movimentos].split("[]")
params[:movimentos]
exit
params
exit
params
c
n
params
c
nota_fiscal_imposto
n
nota_fiscal_imposto
n
c
n
nota_fiscal_imposto
n
nota_fiscal_imposto
n
NotaFiscalImposto.where(nota_fiscal_id: @nota_fiscal.id).delete_all
c
NotaFiscalImposto.where(nota_fiscal_id: @nota_fiscal.id).count
NotaFiscalImposto.where(nota_fiscal_id: @nota_fiscal.id)
@nota_fiscal.nota_fiscal_imposto
n
c
n
@nota_fiscal_item.preco_total
n
c
faturamento_parcela.duplicata.to_s
faturamento_parcela.duplicata
n
c
@nota_fiscal.nota_fiscal_faturamento_parcelas
@nota_fiscal.nota_fiscal_faturamento_parcela
n
@nota_fiscal_faturamento_parcela.duplicata
@nota_fiscal_faturamento_parcela.duplicata
c
n
sprintf '%03d', numero
c
sprintf '%03d', 1
c
"%.2f" %@nota_fiscal.valor_frete
"%.2f" %item.quantidade
sprintf '%03d', 39
sprintf '%03d', 300
sprintf '%03d', 100
sprintf '%03d', 10
sprintf '%03d', 1
sprintf '%02d', 100
sprintf '%02d', 10
sprintf '%02d', 1
item.quantidade.floor(2)
item.quantidade.round(2)
item.quantidade.floor(2)
item.quantidade.round(2)
item.quantidade.round(3)
item.quantidade.round(2)
c
@nota_fiscal.nota_fiscal_itens.sum(:valor_bc_icms)
@nota_fiscal.nota_fiscal_itens.map{|item| item.valor_bc_icms}
