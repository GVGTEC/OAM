<div class="page-header">
  <%= link_to estoques_path, class: 'btn btn-default' do %>
    <span class="glyphicon glyphicon-list-alt"></span>
    Voltar
  <% end %>
  <h1>Lista de Movimentação em Estoque do Lote <%= @produto.descricao %></h1>
</div>

<div style="text-align: right; margin-top:10px; margin-bottom: 15px;">
  <form action="" method="GET">
    <div class="row" style="width:300px;display: inline-block;">
      <div style="float: left">
        <select class="form-control" name="estoque_id">
          <option value="">Buscar Lote</option>
          <% Estoque.where(produto_id: @produto.id).each do |estoque| %>
            <option <% if estoque.id == params[:estoque_id] %>selected="selected"<% end %> value="<%= estoque.id %>"><%= estoque.lote %></option>
          <% end %>
        </select>
      </div>
      <div style="float: left;margin-left:5px">
        <input type="submit" class="btn btn-primary" value="Buscar">
      </div>
    </div>
  </form>
</div>

<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th>Lote</th>
        <th>Fornecedor</th>
        <th>Origem</th>
        <th>Data</th>
        <th>Estoque Inicial</th>
        <th>Qtd</th>
        <th>Estoque Final</th>
        <th>Preço Custo</th>
      </tr>
    </thead>

    <tbody>
      <%= content_tag_for(:tr, @movimento_estoques) do |movimento_estoque| %>
        <td><%= movimento_estoque.estoque.lote %></td>
        <td><%= movimento_estoque.estoque.fornecedor.nome %></td>
        <td><%= movimento_estoque.origem %></td>
        <td><%= movimento_estoque.data.strftime("%d/%m/%Y") %></td>
        <td><%= movimento_estoque.estoque_inicial %></td>
        <td><%= movimento_estoque.qtd %></td>
        <td><%= movimento_estoque.estoque_final %></td>
        <td><%= number_to_currency(movimento_estoque.preco_custo) %></td>
      <% end %>
    </tbody>
  </table>

  <div class="apple_pagination">
    <%= will_paginate @movimento_estoques, :container => false %>
  </div>    
</div>
